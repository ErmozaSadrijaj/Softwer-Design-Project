<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog</title>
    <link  rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
    <script type="module" src="./jsFiles/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


<body>

<!--navbar-->
<nav id="navbar">
    
</nav>


<!---Content-->
<div class="mt-4 text-center">  
  <p class="text-uppercase display-1"><em>Blog</em></p>
</div>
<hr class="light m-auto" style="width: 50%; border: 1px solid black; " >

<button type="button" id="addBgBtn" class="btn btn-primary m-1 text-dark float-end mx-5" data-bs-toggle="modal"  data-bs-target="#addBlog">
    Add Blog
  </button>
<br><br><br>
<main>
    <div class="container">
        <div class="row" id="blog">
            
        </div>
    </div>
</main>
          <div class="modal fade" id="addBlog" tabindex="-1" aria-labelledby="addBlogLabel" aria-hidden="true">
            <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="addBlogLabel">Add Blog</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                <form class="d-flex flex-column">
                    <label for="title">Blog Title:</label>
                    <input type="text" name="title" placeholder="Enter Blog Title..." id="blog-title">
                    <label for="img">Blog Image Link:</label>
                    <input type="file" name="img" placeholder="Select Image..." id="blog-image">
                    <label for="content">Content:</label>
                    <textarea type="text" name="content" placeholder="Type Your Opinion ..." rows="10" cols="50" id="blog-content"></textarea>
                </form>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="addBlogButton">Add Blog</button>
                </div>
            </div>
            </div>
        </div>
<!---footer-->
<footer id="footer">
    
</footer>
</body>
<script type="module">
  import{getNavbar,getFooter,signOut} from '/jsFiles/mainElements.js'
  import{getBlogs,addBlog} from '/jsFiles/blog.js'

 
  getNavbar('navbar')
  getFooter('footer')
  getBlogs('blog',null)
  
  var addBlogBtn = document.getElementById('addBgBtn')

  if(localStorage.getItem('user') != 'teacher'){
    addBlogBtn.classList.remove('d-flex')
    addBlogBtn.classList.add('d-none')
  }
  const addFromModal = document.getElementById('addBlogButton')
  addFromModal.addEventListener('click', e =>{
    e.preventDefault()
    var title = document.getElementById('blog-title').value
    var img = './Photo/'
     img += document.getElementById('blog-image').files[0].name
    var content = document.getElementById('blog-content').value
    addBlog(title,img,content)
  })
    const rm = document.getElementById('readMore')
    rm.addEventListener('click' , e =>{
        e.preventDefault

    })
    const a = document.querySelector('#sign-out')
          a.addEventListener('click', event => {
          event.preventDefault()
          signOut()
        })

</script>
</html>